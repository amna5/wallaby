<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reset Password</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="button-wrapper">
      <div class="button-card">
        <div style="padding-bottom: 98px">
          <h1 class="title" style="line-height: 1.1; padding-bottom: 10px">
            reset <br />password
          </h1>
          <form id="resetForm">
            <div style="padding-bottom: 80px">
              <!-- First password: always visible -->
              <div class="password-field">
                <input
                  type="text"
                  placeholder="Enter new password"
                  id="password1"
                  required
                />
              </div>

              <!-- Second password: hidden with toggle -->
              <div class="password-field">
                <input
                  type="password"
                  placeholder="Confirm password"
                  id="password2"
                  required
                />
                <img
                  src="../img/eye-closed.png"
                  class="eye-icon"
                  id="togglePassword2"
                  alt="toggle password"
                />
              </div>
            </div>

            <button class="confirm-btn" type="submit">confirm</button>
          </form>
        </div>
      </div>
      <div id="toast" class="toast">Password successfully reset! âœ“</div>
    </div>

    <script>
      const password1 = document.getElementById("password1");
      const password2 = document.getElementById("password2");
      const toggle2 = document.getElementById("togglePassword2");
      const form = document.getElementById("resetForm");
      const successMessage = document.getElementById("successMessage");

      // Toggle second input visibility
      toggle2.addEventListener("click", () => {
        if (password2.type === "password") {
          password2.type = "text";
          toggle2.src = "../img/eye-open.png";
        } else {
          password2.type = "password";
          toggle2.src = "../img/eye-closed.png";
        }
      });

      const toast = document.getElementById("toast");

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        if (password1.value !== password2.value) {
          password2.classList.add("error");
          password2.focus();
        } else {
          password2.classList.remove("error");

          // Show toast
          toast.classList.add("show");

          // Hide toast after 2 seconds and redirect
          setTimeout(() => {
            toast.classList.remove("show");
            window.location.href = "login.html"; // redirect
          }, 2000);
        }
      });

      // Remove red border when user starts typing in second input
      password2.addEventListener("input", () => {
        password2.classList.remove("error");
      });
    </script>
  </body>
</html>
